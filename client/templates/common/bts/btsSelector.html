<template name="btsSelector">
    <div class="row">
        <div class="col-md-12">
            <h4 style="text-align: center;">БТС-{{btsNo}} Оқушыларды таңдау</h4>

            <div class="form-inline" style="padding-bottom: 10pt">
                <div class="form-group" style="margin-right: 10pt">
                    {{> academicYear}}
                </div>

                <div class="form-group" style="float: right">
                    <a class="btn btn-success" id="generate_all">Generate all</a>
                    <a class="btn btn-success" id="download_all">Download all</a>
                    <a class="btn btn-success" id="generate_extras">Generate extra</a>
                    <a class="btn btn-success" id="download_extras">Download extra</a>
                </div>

            </div>
            {{#if Template.subscriptionsReady}}
            <div class="table table-responsive" id="out">
              <table class="table table-striped  table-bordered table-hover table-condensed"  border=1 cellpadding=0 cellspacing=0 width=100%>

                <thead>
                    <tr class="bts-header center">
                        <th style="width: 20pt;  text-align: center;">#</th>
                        <th style="width: 55pt;  text-align: center;">Мектеп ID</th>
                        <th style="width: 270pt; ">Мектеп аты</th>
                        <th style="width: 80pt; text-align: center;">7 сынып</th>
                        <th style="width: 80pt; text-align: center;">8 сынып</th>
                        <th style="width: 80pt; text-align: center;">9 сынып</th>
                        <th style="width: 80pt; text-align: center;">10 сынып</th>
                        <th style="width: 80pt; text-align: center;">Қосалқы тізім</th>

                    </tr>
                </thead>
                <tbody>
                    {{#each schools}}
                    <tr>
                        <td style="width: 20pt; ">{{math @index "+" 1}}</td>
                        <td style="width: 55pt;text-align: center;">{{schoolId}}</td>
                        <td style="width: 270pt;">{{shortName}}</td>
                        
                        <td style="text-align: center"></td>
                        
                        <td style="text-align: center">
                            {{#if (exists schoolId '8')}}
                                <a class="btn btn-warning" id="{{schoolId}}_8">Download</a>
                            {{else}}
                                <a class="btn btn-info" id="{{schoolId}}_8">Generate</a>
                            {{/if}}

                        </td>

                        <td style="text-align: center">
                            {{#if (exists schoolId '9')}}
                                <a class="btn btn-warning" id="{{schoolId}}_9">Download</a>
                            {{else}}
                                <a class="btn btn-info" id="{{schoolId}}_9">Generate</a>
                            {{/if}}

                        </td>

                        <td style="text-align: center">
                            {{#if (exists schoolId '10')}}
                                <a class="btn btn-warning" id="{{schoolId}}_10">Download</a>
                            {{else}}
                                <a class="btn btn-info" id="{{schoolId}}_10">Generate</a>
                            {{/if}}
                        </td>

                        <td style="text-align: center">
                            {{#if (generatedExtraList schoolId)}}
                                <a class="btn btn-warning" id="{{schoolId}}_extra">Download extra list</a>
                            {{else}}
                                {{#if existsAll schoolId}}
                                    <a class="btn btn-info" id="{{schoolId}}_extra">Generate extra list</a>
                                {{else}}
                                    <a class="btn btn-info" id="{{schoolId}}_extra" disabled>Generate extra list</a>
                                {{/if}}
                            {{/if}}
                        </td>
                    </tr>
                    
                    {{/each}}
                </tbody>
              </table>
            </div>

            {{else}}
            <p>Loading...</p>
            {{/if}}
        </div>
    </div>
</template>
